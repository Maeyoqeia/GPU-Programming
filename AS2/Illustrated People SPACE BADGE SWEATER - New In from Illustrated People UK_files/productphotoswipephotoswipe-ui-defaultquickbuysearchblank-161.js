var Product={storage:{ajaxLoaded:!1,parentProductID:null,productID:null,imageKey:"",defaultImages:[],images:[],selectedAttributes:{},productEvent:null,optionsJSON:{},quantity:1,productSelection:{},productOptionsQueryString:"",AddToBagQueryString:"",personalisation_template_id:null,skip_customisation_options:!1,imageCount:0,disable_price_update:!1},flags:{inStock:!1,hasBuyableSelection:!1,ageRestricted:!1,extraValidationsPassed:!0},getParentProductID:function(){null===this.storage.parentProductID&&(this.storage.parentProductID=parseInt(document.getElementById("js-parent-product-id").value));return this.storage.parentProductID},setProductID:function(b){this.storage.productID=parseInt(b);document.getElementById("js-product-id").value=this.storage.productID;return this},getProductID:function(){null===this.storage.productID&&this.setProductID(document.getElementById("js-product-id").value);return this.storage.productID},setProductSelection:function(b){this.storage.productSelection=b;return this},getProductSelection:function(){return this.storage.productSelection},inStock:function(){return this.flags.inStock},setDefaultImages:function(b){this.storage.defaultImages=b||[];return this},getDefaultImages:function(){return this.storage.defaultImages},setImages:function(b){this.storage.images=b||[];return this},setImageKey:function(b){this.storage.imageKey=b||"";return this},getImageKey:function(){return this.storage.imageKey},buildImageGallery:function(i,n){i=i||this.getDefaultImages();n=n||!1;var h,l=[];this.storage.imageCount=0;for(h in i){if(i.hasOwnProperty(h)){switch(this.storage.imageCount++,l.push(i[h].image_id),i[h].image_type){case"youtube":i[h].is_youtube=!0;break;case"vimeo":i[h].is_vimeo=!0}}}l=l.join("-");if(!l.length||l==this.getImageKey()&&!n){return this}this.setImages(i).setImageKey(l);this.triggerEvent("images_pre_render");Tache.render("js-product-image",{images:i});var m=$("#js-product-image");try{m.find("img").unveil()}catch(k){}this.triggerEvent("images_pre_slider");m.find(".product__image__main").slickSlider({asNavFor:".product__image__thumbs",slidesToShow:1,slidesToScroll:1,arrows:!0,autoplay:!1,fade:!0,responsive:[{breakpoint:768,settings:{centerMode:1<this.storage.imageCount,fade:!1,slidesToShow:1,centerPadding:"20%"}},{breakpoint:480,settings:{fade:!1,centerMode:!1,slidesToShow:1}}]}).on("beforeChange",function(w,u,v,s){w=u.$slides.eq(s).find("iframe");var t=w.length,r=u.$slider.siblings(".product-sash"),o="mobile"==vs.deviceType(),p=u.$slides.eq(v).find("iframe");if(u.$slides.eq(v).find("img.cloudzoom").length){var q=u.$slides.eq(v).find("img").data("CloudZoom");q&&q.closeZoom()}"undefined"!==typeof u.$nextArrow&&u.$nextArrow[t&&!o?"hide":"show"]();"undefined"!==typeof u.$prevArrow&&u.$prevArrow[t&&!o?"hide":"show"]();r.length&&r[t?"hide":"show"]();if(p.length){switch(p.eq(0).data("video_type")){case"youtube":p.get(0).contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");break;case"vimeo":p.get(0).contentWindow.postMessage('{"method":"pause","value":""}',"*")}}if(t&&!o){switch(w.eq(0).data("video_type")){case"youtube":w.get(0).contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");break;case"vimeo":w.get(0).contentWindow.postMessage('{"method":"play","value":""}',"*")}}Product.triggerEvent("image_slide_change",{$current:u.$slides.eq(v),$next:u.$slides.eq(s)})});var j=this;m.find(".product__image__thumb__img").first().load(function(){m.find(".product__image__thumbs").on("init reInt",function(){var e=$(this),f=e.find(".product__image__thumb"),d;f.find("img").on("load lookup",function(){clearTimeout(d);d=setTimeout(function(){f.matchHeight();$(window).resize();e.css("opacity",1)},100)}).each(function(){this.complete&&$(this).load()});d=setTimeout(function(){f.matchHeight();$(window).resize();e.css("opacity",1)},3000);f.matchHeight()}).slickSlider({asNavFor:".product__image__main",focusOnSelect:!0,arrows:!0,autoplay:!1,vertical:ProductSettings.vertical_thumbs,slidesToScroll:1,slidesToShow:ProductSettings.vertical_thumb_count,centerMode:!ProductSettings.vertical_thumbs,appendArrows:ProductSettings.vertical_thumbs?".product__image__thumbs":".product__image__thumbs__outer"}).toggle(ProductSettings.vertical_thumbs||1<j.storage.imageCount)});$(".tap-zoom-message").delay(2750).fadeOut(1000);this.triggerEvent("images_post_slider");"undefined"!==typeof ProductSettings.is_quickbuy&&ProductSettings.is_quickbuy?m.find("a.product__image__zoom-link").click(function(b){b.preventDefault();return !1}).addClass("product__image__zoom-link--no-click"):photoSwipe(".product__image__main");return this},generateProductOptionsQueryString:function(){this.clearMessages().triggerEvent("generate_options_querystring");var b,d=[];for(b in this.storage.selectedAttributes){this.storage.selectedAttributes.hasOwnProperty(b)&&d.push("attributes["+b.replace("a","")+"]="+this.storage.selectedAttributes[b])}this.storage.productOptionsQueryString=d.length?"?"+d.join("&"):"";this.clearMessages().triggerEvent("generated_options_querystring",this.storage.productOptionsQueryString);return this},getProductOptionsQueryString:function(){return this.storage.productOptionsQueryString},getProductOptions:function(){this.clearMessages().triggerEvent("options_updating");this.generateProductOptionsQueryString();var b=this;$.getJSON("/ajax/get_product_options/"+this.getParentProductID()+this.getProductOptionsQueryString(),function(a){b.storage.ajaxLoaded=!0;b.processProductOptions(b.storage.optionsJSON=a);b.triggerEvent("options_updated",a)});return this},processProductOptions:function(t){this.triggerEvent("pre_options");Tache.render("js-product-options",t);Tache.render("js-product-options-buttons",t);Tache.render("js-product-options-controls",t);var r=this.getDefaultImages(),s,p,q,o,n={};for(s in t.attributes){if(t.attributes.hasOwnProperty(s)&&(q=t.attributes[s])){for(p in q.values){q.values.hasOwnProperty(p)&&(o=q.values[p])&&(n[o.value_id]=o.value,"Y"==q.images&&o.images.length&&(r=o.images),o.selected&&this.setSelectedAttribute(q.id,o.value_id))}this.storage.selectedAttributes.hasOwnProperty("a"+q.id)&&(this.storage.selectedAttributes["a"+q.id]&&!n.hasOwnProperty(this.storage.selectedAttributes["a"+q.id]))&&delete this.storage.selectedAttributes["a"+q.id]}}var j;s={};var i,h;p=!0;this.flags.hasBuyableSelection=!1;if("undefined"!==typeof t.selected_attributes&&"undefined"!==typeof t.total_attributes&&t.selected_attributes==t.total_attributes){for(j in t.selection){if(t.selection.hasOwnProperty(j)){s=t.selection[j];this.setProductID(s.product_id);this.setProductSelection(s);this.flags.hasBuyableSelection=!0;break}}}else{for(i in t.attributes){if(t.attributes.hasOwnProperty(i)){for(h in t.attributes[i].values){if(t.attributes[i].values.hasOwnProperty(h)&&"undefined"!==typeof t.attributes[i].values[h].selected&&t.attributes[i].values[h].selected&&"undefined"!==typeof t.attributes[i].values[h].has_stock&&!t.attributes[i].values[h].has_stock){p=!1;break}}}if(!p){break}}for(j in t.selection){if(t.selection.hasOwnProperty(j)){s=t.selection[j];break}}this.setProductID(0);this.setProductSelection(s)}"undefined"!==typeof s.product_parent_has_stock?this.flags.inStock=p&&"Y"==s.product_parent_has_stock:"undefined"!==typeof s.stock&&(this.flags.inStock=s.stock?!0:"undefined"!==typeof s.treat_as_in_stock&&"Y"==s.treat_as_in_stock||"undefined"!==typeof s.order_zero_stock&&"Y"==s.treat_as_in_stock);j=$("#js-product-quantity");0!=j.length&&"undefined"!==typeof j[0]&&j[0].innerHTML!=this.getQuantity()&&j.html(this.getQuantity());this.setImages(r).buildImageGallery(r);this.triggerEvent("options",t)},makeAttributeSelection:function(b,d){this.setSelectedAttribute(b,d);this.getProductOptions()},getSelectedAttributes:function(){return this.storage.selectedAttributes},setSelectedAttribute:function(b,d){isNaN(d)||""==d?"undefined"!=typeof this.storage.selectedAttributes["a"+b]&&delete this.storage.selectedAttributes["a"+b]:this.storage.selectedAttributes["a"+b]=parseInt(d)},getProductEvent:function(){return null===this.storage.productEvent?this.storage.productEvent=$("#js-product-event"):this.storage.productEvent},onEvent:function(b,d){this.getProductEvent().on(b,function(c,f){d(f)});return this},triggerEvent:function(b){this.getProductEvent().trigger.apply(this.getProductEvent(),arguments);return this},setQuantity:function(b){b=parseInt(b);this.storage.quantity=1>b?1:b;this.triggerEvent("quantity",this.storage.quantity);return this},increaseQuantity:function(b){this.storage.quantity+=parseInt(b);this.triggerEvent("quantity",this.storage.quantity);return this},decreaseQuantity:function(b){this.storage.quantity-=parseInt(b);1>this.storage.quantity&&(this.storage.quantity=1);this.triggerEvent("quantity",this.storage.quantity);return this},getQuantity:function(){return this.storage.quantity},getPriceBreakForQuantity:function(e){e=e||this.getQuantity();var f=this.getProductSelection();if("undefined"!==typeof f.price_breaks){var d;for(d=f.price_breaks.length;0<=d;d--){if(f.price_breaks[d]&&f.price_breaks[d].quantity<=e){return f.price_breaks[d]}}}return !1},getFlatPrice:function(){var b={inc:0,ex:0},d=this.getPriceBreakForQuantity();d?(b.inc=d.flat_price_inc,b.ex=d.flat_price_ex):(d=this.getProductSelection(),b.inc=d.flat_price_sale_inc,b.ex=d.flat_price_sale_ex);return b},setExtraValidationResult:function(b){b||(this.flags.extraValidationsPassed=!1)},extraValidations:function(){this.flags.extraValidationsPassed=!0;this.triggerEvent("product_selection_validation");return this.flags.extraValidationsPassed},validateSelection:function(){this.clearMessages();this.extraValidations();if(this.getProductID()&&this.getQuantity()&&this.flags.hasBuyableSelection&&this.flags.extraValidationsPassed){return !0}var f,h,d="undefined"!==typeof this.storage.optionsJSON.attributes?this.storage.optionsJSON.attributes:[];for(f in d){if(d.hasOwnProperty(f)){var g=!1;for(h in d[f].values){if(d[f].values.hasOwnProperty(h)&&"undefined"!==d[f].values[h].selected&&d[f].values[h].selected){g=!0;break}}g||this.addMessage(vs.lang("products.option_not_selected").replace("%s",d[f].name))}}return !1},setAddToBasketAllowed:function(b){b||(this.storage.add_to_basket_allowed=b)},addToBasket:function(){this.storage.add_to_basket_allowed=!0;this.triggerEvent("add_to_basket_allowed");if(!this.storage.ajaxLoaded||!this.storage.add_to_basket_allowed){return !1}var e=this.clearMessages(),f=this.getQuantity(),d=this.buildAddToBagQS(this.getProductID(),f);return this.validateSelection()?(this.triggerEvent("options_updating"),$.getJSON(d,function(a){e.triggerEvent("options_updated",a);if("undefined"!==typeof a.error){if("undefined"!==typeof a.message){e.addMessage(a.message)}else{if("string"!==typeof a.error&&a.error.length){for(var i=0;i<a.error.length;i++){e.addMessage(a.error[i])}}else{e.addMessage(a.error)}}}else{parent.ProductRelay.updateHeaderBasketInfo(a);if("undefined"!==typeof a.products){for(var h in a.products){if(a.products.hasOwnProperty(h)&&a.products[h].product_id==e.getProductID()){i=a.products[h];break}}"undefined"!==typeof a.limited&&("undefined"!==typeof a.limited.is_limited&&"Y"==a.limited.is_limited)&&(f=a.limited.num_added,"undefined"!==typeof a.note&&""!==a.note&&e.addMessage(a.note));Tache.render(0<Product.storage.personalisation_template_id&&!Product.storage.skip_customisation_options?"js-added-to-basket-and-customise":"js-added-to-basket",{title:i.product_title,quantity:f,product_quantity:i.product_quantity});var c=$("#js-added-to-basket > div").hide(),i=$("#js-added-close-button");"mobile"==vs.deviceType()?(c.slideDown(450).delay(3000).slideUp(600),i.on("click",function(){c.stop();c.slideUp(600)})):c.show()}e.triggerEvent("added_to_basket",a)}}),!0):!1},addToWishList:function(g){if(!this.storage.ajaxLoaded||"function"==typeof opp_check_required_fields&&!opp_check_required_fields()){return !1}var j=$("#js-wishlist-count");if(j.length){var f=j.contents().filter(function(){return 3==this.nodeType})[0].nodeValue;j.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=parseInt(f)+1}var h=this.clearMessages(),i=this.getQuantity();if("function"===typeof ProductSettings.customWishlistURL){if(g=ProductSettings.customWishlistURL(),""===g||!1===g){return !1}}else{g="/lists/add/"+g+"/"+this.getProductID()+"/"+i+"/"+this.getParentProductID()}this.triggerEvent("options_updating");if("undefined"!==typeof ProductSettings.wishlistDirectAdd&&ProductSettings.wishlistDirectAdd){return window.location=g,!0}$.getJSON(g,function(b){h.triggerEvent("options_updated",b);"undefined"!==typeof b.error?h.addMessage(b.message):"undefined"!==typeof b.action&&"added"==b.action&&(Tache.render("js-added-to-wishlist",{quantity:i,title:$("#js-product-title").html(),product_count:b.product_count,list_name:"undefined"!==typeof b.list[0]?b.list[0].wishlist_name:"",list:"undefined"!==typeof b.list[0]?b.list[0]:{}}),b=$("#js-added-to-wishlist > div").hide(),"mobile"==vs.deviceType()?b.slideDown(450).delay(3000).slideUp(600):b.show(),h.triggerEvent("added_to_wishlist"))});return !0},addSample:function(){if(!this.storage.ajaxLoaded){return !1}var b=this.clearMessages();this.triggerEvent("options_updating");$.ajax({url:"/samples/add/"+this.getParentProductID()+"/"+this.getProductID(),success:function(d){b.triggerEvent("options_updated",d);if("undefined"!==typeof d.error){b.addMessage(d.message)}else{if("undefined"!==typeof d.status&&"added_to_basket"==d.status){parent.ProductRelay.updateHeaderBasketInfo(d);Tache.render("js-added-to-sample",{title:$("#js-product-title").html(),quantity:1});var a=$("#js-added-to-sample > div").hide();"mobile"==vs.deviceType()?a.slideDown(450).delay(3000).slideUp(600):a.show();b.triggerEvent("sample_added",d)}else{"undefined"!==typeof d.status&&"limit_reached"==d.status&&(Tache.render("js-sample-limit-reached",{title:$("#js-product-title").html(),quantity:1}),$("#js-sample-limit-reached > div").hide().show(),b.triggerEvent("sample_limit_reached",d))}}}});return !0},addToDynamicBundle:function(b){this.storage.add_to_basket_allowed=!0;this.triggerEvent("add_to_basket_allowed");if(!this.storage.ajaxLoaded||!this.storage.add_to_basket_allowed){return !1}this.clearMessages();return this.validateSelection()?($("#js-add-to-basket__form").attr({action:"/dynamic_bundles/select/"+b+"/0/"+this.getParentProductID(),target:"_top"}).submit(),!0):!1},clearMessages:function(){var g=$("#js-product-alerts"),j=$("#js-added-to-basket"),f=$("#js-added-to-wishlist"),h=$("#js-added-to-sample"),i=$("#js-added-to-basket-and-customise");g.length&&g.html("");j.length&&j.html("");f.length&&f.html("");h.length&&h.html("");i.length&&i.html("");return this},addMessage:function(b,d){$("#"+(d||"js-product-alerts")).prepend('<div class="alert">'+b+"</div>")},appendAddToBagQS:function(b){0<this.storage.AddToBagQueryString.length&&"&"!=this.storage.AddToBagQueryString.substr(-1)&&(this.storage.AddToBagQueryString+="&");this.storage.AddToBagQueryString+=b},buildAddToBagQS:function(){var b="/ajax/addtobasket/?product_id="+this.getProductID()+"&quantity="+this.getQuantity();0<this.storage.personalisation_template_id&&this.storage.skip_customisation_options&&(b+="&personalisations="+this.storage.personalisation_template_id);$('input[name="products_to_bind"]:checked').each(function(d,a){b+="&products_to_bind[]="+$(a).val()});$('input[name="product_bundle_pack"]:checked').each(function(d,a){b+="&product_bundle_pack="+$(a).val()});this.storage.AddToBagQueryString=b;this.triggerEvent("add_to_bag_querystring");return this.storage.AddToBagQueryString},startCustomisation:function(e,f){var d="/product_personalisation/start/"+e+"/1/"+f;0<this.storage.personalisation_template_id&&!this.storage.skip_customisation_options?parent.window.location.href=d:0<$(".added-to-basket__button--customise").length&&$(".added-to-basket__button--customise").prop("href",d)},flagCustomisation:function(b,d){this.storage.personalisation_template_id=b;this.storage.skip_customisation_options=d}},photoSwipe=function(j){var p=function(q){q=q.childNodes;for(var l=q.length,w=[],v,u,t,s,r=0;r<l;r++){v=q[r],1===v.nodeType&&(u=v.children[0],t=u.getAttribute("data-size"),s=-1===u.parentNode.className.indexOf("slick-cloned"),t&&s&&(t=t.split("x"),t={src:u.getAttribute("href"),w:parseInt(t[0],10),h:parseInt(t[1],10)},0<u.children.length&&(t.msrc=u.children[0].getAttribute("src")),t.el=v,w.push(t)))}return w},h=function i(d,c){return d&&(c(d)?d:i(d.parentNode,c))},n=function(y){y=y||window.event;y.preventDefault?y.preventDefault():y.returnValue=!1;y=y.target||y.srcElement;var x;if(!y.tagName||"IMG"===y.tagName.toUpperCase()){if(y=h(y,function(c){return(x=c.getAttribute("itemprop"))&&null!==x&&""!==x&&"ASSOCIATEDMEDIA"==x.toUpperCase()})){for(var w=y.parentNode,v=y.parentNode.childNodes,u=v.length,s=0,t,b,l,d=0;d<u;d++){if(1===v[d].nodeType&&(l=v[d].children[0],b=l.getAttribute("data-size"),l=-1===l.parentNode.className.indexOf("slick-cloned"),b&&l)){if(v[d]===y){t=s;break}s++}}0<=t&&o(t,w);return !1}}},o=function(g,c,r){var q=document.getElementById("js-photo-swipe"),l=p(c);c={history:!1,galleryUID:c.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var d=l[e].el.getElementsByTagName("img")[0];e=window.pageYOffset||document.documentElement.scrollTop;d=d.getBoundingClientRect();return{x:d.left,y:d.top+e,w:d.width}}};c.index=parseInt(g,10);isNaN(c.index)||(r&&(c.showAnimationDuration=0),c.closeOnScroll=0,(new PhotoSwipe(q,PhotoSwipeUI_Default,l,c)).init())};j=document.querySelectorAll(j);for(var m=0,k=j.length;m<k;m++){j[m].setAttribute("data-pswp-uid",m+1),j[m].onclick=n}};(function(b,a){"function"===typeof define&&define.amd?define(a):"object"===typeof exports?module.exports=a():b.PhotoSwipe=a()})(this,function(){return function(bC,af,cq,cB){var bL={features:null,bind:function(g,f,l,k){k=(k?"remove":"add")+"EventListener";f=f.split(" ");for(var h=0;h<f.length;h++){if(f[h]){g[k](f[h],l,!1)}}},isArray:function(e){return e instanceof Array},createEl:function(f,e){var g=document.createElement(e||"div");f&&(g.className=f);return g},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(f,e,g){bL.bind(f,e,g,!0)},removeClass:function(f,e){f.className=f.className.replace(RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(f,e){bL.hasClass(f,e)||(f.className+=(f.className?" ":"")+e)},hasClass:function(f,e){return f.className&&RegExp("(^|\\s)"+e+"(\\s|$)").test(f.className)},getChildByClass:function(f,e){for(var g=f.firstChild;g;){if(bL.hasClass(g,e)){return g}g=g.nextSibling}},arraySearch:function(f,e,h){for(var g=f.length;g--;){if(f[g][h]===e){return g}}return -1},extend:function(f,e,h){for(var g in e){!e.hasOwnProperty(g)||h&&f.hasOwnProperty(g)||(f[g]=e[g])}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return -(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return --e*e*e+1}}},detectFeatures:function(){if(bL.features){return bL.features}var w=bL.createEl().style,v="",u={};u.oldIE=document.all&&!document.addEventListener;u.touch="ontouchstart" in window;window.requestAnimationFrame&&(u.raf=window.requestAnimationFrame,u.caf=window.cancelAnimationFrame);u.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled;if(!u.pointerEvent){v=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);t&&0<t.length&&(t=parseInt(t[1],10),1<=t&&8>t&&(u.isOldIOSPhone=!0))}t=(t=v.match(/Android\s([0-9\.]*)/))?t[1]:0;t=parseFloat(t);1<=t&&(4.4>t&&(u.isOldAndroid=!0),u.androidVersion=t);u.isMobileOpera=/opera mini|opera mobi/i.test(v)}for(var t=["transform","perspective","animationName"],s=["","webkit","Moz","ms","O"],f,q,p=0;4>p;p++){for(var v=s[p],m=0;3>m;m++){f=t[m],q=v+(v?f.charAt(0).toUpperCase()+f.slice(1):f),!u[f]&&q in w&&(u[f]=q)}v&&!u.raf&&(v=v.toLowerCase(),u.raf=window[v+"RequestAnimationFrame"],u.raf&&(u.caf=window[v+"CancelAnimationFrame"]||window[v+"CancelRequestAnimationFrame"]))}if(!u.raf){var n=0;u.raf=function(g){var e=(new Date).getTime(),k=Math.max(0,16-(e-n)),h=window.setTimeout(function(){g(e+k)},k);n=e+k;return h};u.caf=function(e){clearTimeout(e)}}u.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;return bL.features=u}};bL.detectFeatures();bL.features.oldIE&&(bL.bind=function(l,k,t,s){k=k.split(" ");for(var q=(s?"detach":"attach")+"Event",p,n=function(){t.handleEvent.call(t)},m=0;m<k.length;m++){if(p=k[m]){if("object"===typeof t&&t.handleEvent){if(!s){t["oldIE"+p]=n}else{if(!t["oldIE"+p]){return !1}}l[q]("on"+p,t["oldIE"+p])}else{l[q]("on"+p,t)}}}});var bN=this,bH={allowPanToNext:!0,spacing:0.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:0.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(f,e){return f?1:0.7>e.initialZoomLevel?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};bL.extend(bH,cB);var bY=function(){return{x:0,y:0}},aj,aX,aM,bF,aD,cd,ce=bY(),b=bY(),bK=bY(),cJ,j,bt,bs={},bA,bT,a9,a0,aP,aS,b9=0,cw={},cn=bY(),by,au,cj=0,aJ,aA,cN,aq,bR,bS,ah=!0,b6,aG=[],d,ax,ak,o,an,cE,bD,cA={},cD=!1,cL=function(f,e){bL.extend(bN,e.publicMethods);aG.push(f)},cy=function(f){var e=cm();return f>e-1?f-e:0>f?e+f:f},aY={},bx=function(f,e){aY[f]||(aY[f]=[]);return aY[f].push(e)},bE=function(f){var e=aY[f];if(e){var h=Array.prototype.slice.call(arguments);h.shift();for(var g=0;g<e.length;g++){e[g].apply(bN,h)}}},b8=function(){return(new Date).getTime()},b5=function(e){b2=e;bN.bg.style.opacity=e*bH.bgOpacity},cO=function(g,e,l,k,h){if(!cD||h&&h!==bN.currItem){k/=h?h.fitRatio:bN.currItem.fitRatio}g[bR]=a9+e+"px, "+l+"px"+a0+" scale("+k+")"},bv=function(e){b4&&(e&&(bA>bN.currItem.fitRatio?cD||(ci(bN.currItem,!1,!0),cD=!0):cD&&(ci(bN.currItem),cD=!1)),cO(b4,bK.x,bK.y,bA))},aN=function(e){e.container&&cO(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},br=function(f,e){e[bR]=a9+f+"px, 0px"+a0},bB=function(f,e){if(!bH.loop&&e){var h=bF+(cn.x*b9-f)/cn.x,g=Math.round(f-b3.x);if(0>h&&0<g||h>=cm()-1&&0>g){f=b3.x+g*bH.mainScrollEndFriction}}b3.x=f;br(f,aD)},ae=function(f,e){var g=aE[f]-cw[f];return b[f]+ce[f]+g-g*(e/bT)},bq=function(f,e){f.x=e.x;f.y=e.y;e.id&&(f.id=e.id)},cF=function(e){e.x=Math.round(e.x);e.y=Math.round(e.y)},a=null,cI=function(){a&&(bL.unbind(document,"mousemove",cI),bL.addClass(bC,"pswp--has_mouse"),bH.mouseUsed=!0,bE("mouseUsed"));a=setTimeout(function(){a=null},100)},cv=function(f,e){var g=av(bN.currItem,bs,f);e&&(bG=g);return g},cs=function(e){e||(e=bN.currItem);return e.initialZoomLevel},bO=function(e){e||(e=bN.currItem);return 0<e.w?bH.maxSpreadZoom:1},bn=function(f,e,h,g){if(g===bN.currItem.initialZoomLevel){return h[f]=bN.currItem.initialPosition[f],!0}h[f]=ae(f,g);return h[f]>e.min[f]?(h[f]=e.min[f],!0):h[f]<e.max[f]?(h[f]=e.max[f],!0):!1},cf=function(){bR?(a9="translate"+(bD.perspective&&!b6?"3d(":"("),a0=bD.perspective?", 0px)":")"):(bR="left",bL.addClass(bC,"pswp--ie"),br=function(f,e){e.left=f+"px"},aN=function(f){var e=1<f.fitRatio?1:f.fitRatio,h=f.container.style,g=e*f.h;h.width=e*f.w+"px";h.height=g+"px";h.left=f.initialPosition.x+"px";h.top=f.initialPosition.y+"px"},bv=function(){if(b4){var f=b4,e=bN.currItem,h=1<e.fitRatio?1:e.fitRatio,g=h*e.h;f.width=h*e.w+"px";f.height=g+"px";f.left=bK.x+"px";f.top=bK.y+"px"}})},bI=function(f){var e="";bH.escKey&&27===f.keyCode?e="close":bH.arrowKeys&&(37===f.keyCode?e="prev":39===f.keyCode&&(e="next"));!e||(f.ctrlKey||f.altKey||f.shiftKey||f.metaKey)||(f.preventDefault?f.preventDefault():f.returnValue=!1,bN[e]())},bk=function(e){e&&(bh||bM||cp||al)&&(e.preventDefault(),e.stopPropagation())},be=function(){bN.setScrollOffset(0,bL.getScrollY())},cl={},r=0,cP=function(e){cl[e]&&(cl[e].raf&&ax(cl[e].raf),r--,delete cl[e])},bQ=function(e){cl[e]&&cP(e);cl[e]||(r++,cl[e]={})},cG=function(){for(var e in cl){cl.hasOwnProperty(e)&&cP(e)}},cu=function(x,w,v,u,t,s,q){var p=b8(),m;bQ(x);var n=function(){cl[x]&&(m=b8()-p,m>=u?(cP(x),s(v),q&&q()):(s((v-w)*t(m/u)+w),cl[x].raf=d(n)))};n()},a8={shout:bE,listen:bx,viewportSize:bs,options:bH,isMainScrollAnimating:function(){return cp},getZoomLevel:function(){return bA},getCurrentIndex:function(){return bF},isDragging:function(){return b1},isZooming:function(){return bZ},setScrollOffset:function(f,e){cw.x=f;cE=cw.y=e;bE("updateScrollOffset",cw)},applyZoomPan:function(f,e,h,g){bK.x=e;bK.y=h;bA=f;bv(g)},init:function(){if(!aj&&!aX){var e;bN.framework=bL;bN.template=bC;bN.bg=bL.getChildByClass(bC,"pswp__bg");ak=bC.className;aj=!0;bD=bL.detectFeatures();d=bD.raf;ax=bD.caf;bR=bD.transform;an=bD.oldIE;bN.scrollWrap=bL.getChildByClass(bC,"pswp__scroll-wrap");bN.container=bL.getChildByClass(bN.scrollWrap,"pswp__container");aD=bN.container.style;bN.itemHolders=by=[{el:bN.container.children[0],wrap:0,index:-1},{el:bN.container.children[1],wrap:0,index:-1},{el:bN.container.children[2],wrap:0,index:-1}];by[0].el.style.display=by[2].el.style.display="none";cf();bt={resize:bN.updateSize,scroll:be,keydown:bI,click:bk};e=bD.isOldIOSPhone||bD.isOldAndroid||bD.isMobileOpera;bD.animationName&&bD.transform&&!e||(bH.showAnimationDuration=bH.hideAnimationDuration=0);for(e=0;e<aG.length;e++){bN["init"+aG[e]]()}af&&(bN.ui=new af(bN,bL)).init();bE("firstUpdate");bF=bF||bH.index||0;if(isNaN(bF)||0>bF||bF>=cm()){bF=0}bN.currItem=bm(bF);if(bD.isOldIOSPhone||bD.isOldAndroid){ah=!1}bC.setAttribute("aria-hidden","false");bH.modal&&(ah?bC.style.position="fixed":(bC.style.position="absolute",bC.style.top=bL.getScrollY()+"px"));void 0===cE&&(bE("initialLayout"),cE=o=bL.getScrollY());e="pswp--open ";bH.mainClass&&(e+=bH.mainClass+" ");bH.showHideOpacity&&(e+="pswp--animate_opacity ");e+=b6?"pswp--touch":"pswp--notouch";e+=bD.animationName?" pswp--css_animation":"";e+=bD.svg?" pswp--svg":"";bL.addClass(bC,e);bN.updateSize();cd=-1;cj=null;for(e=0;3>e;e++){br((e+cd)*cn.x,by[e].el.style)}an||bL.bind(bN.scrollWrap,j,bN);bx("initialZoomInEnd",function(){bN.setContent(by[0],bF-1);bN.setContent(by[2],bF+1);by[0].el.style.display=by[2].el.style.display="block";bH.focus&&bC.focus();bL.bind(document,"keydown",bN);bD.transform&&bL.bind(bN.scrollWrap,"click",bN);bH.mouseUsed||bL.bind(document,"mousemove",cI);bL.bind(window,"resize scroll",bN);bE("bindEvents")});bN.setContent(by[1],bF);bN.updateCurrItem();bE("afterInit");ah||(aP=setInterval(function(){r||(b1||bZ||bA!==bN.currItem.initialZoomLevel)||bN.updateSize()},1000));bL.addClass(bC,"pswp--visible")}},close:function(){aj&&(aj=!1,aX=!0,bE("close"),bL.unbind(window,"resize",bN),bL.unbind(window,"scroll",bt.scroll),bL.unbind(document,"keydown",bN),bL.unbind(document,"mousemove",cI),bD.transform&&bL.unbind(bN.scrollWrap,"click",bN),b1&&bL.unbind(window,cJ,bN),bE("unbindEvents"),a2(bN.currItem,null,!0,bN.destroy))},destroy:function(){bE("destroy");bd&&clearTimeout(bd);bC.setAttribute("aria-hidden","true");bC.className=ak;aP&&clearInterval(aP);bL.unbind(bN.scrollWrap,j,bN);bL.unbind(window,"scroll",bN);bp();cG();aY=null},panTo:function(f,e,g){g||(f>bG.min.x?f=bG.min.x:f<bG.max.x&&(f=bG.max.x),e>bG.min.y?e=bG.min.y:e<bG.max.y&&(e=bG.max.y));bK.x=f;bK.y=e;bv()},handleEvent:function(e){e=e||window.event;if(bt[e.type]){bt[e.type](e)}},goTo:function(f){f=cy(f);var e=f-bF;cj=e;bF=f;bN.currItem=bm(bF);b9-=e;bB(cn.x*b9);cG();cp=!1;bN.updateCurrItem()},next:function(){bN.goTo(bF+1)},prev:function(){bN.goTo(bF-1)},updateCurrZoomItem:function(f){f&&bE("beforeChange",0);if(by[1].el.children.length){var e=by[1].el.children[0];b4=bL.hasClass(e,"pswp__zoom-wrap")?e.style:null}else{b4=null}bG=bN.currItem.bounds;bT=bA=bN.currItem.initialZoomLevel;bK.x=bG.center.x;bK.y=bG.center.y;f&&bE("afterChange")},invalidateCurrItems:function(){aS=!0;for(var e=0;3>e;e++){by[e].item&&(by[e].item.needsUpdate=!0)}},updateCurrItem:function(f){if(0!==cj){var e=Math.abs(cj);if(!(f&&2>e)){bN.currItem=bm(bF);cD=!1;bE("beforeChange",cj);3<=e&&(cd+=cj+(0<cj?-3:3),e=3);for(var g=0;g<e;g++){0<cj?(f=by.shift(),by[2]=f,cd++,br((cd+2)*cn.x,f.el.style),bN.setContent(f,bF-e+g+1+1)):(f=by.pop(),by.unshift(f),cd--,br(cd*cn.x,f.el.style),bN.setContent(f,bF+e-g-1-1))}b4&&1===Math.abs(cj)&&(e=bm(au),e.initialZoomLevel!==bA&&(av(e,bs),ci(e),aN(e)));cj=0;bN.updateCurrZoomItem();au=bF;bE("afterChange")}}},updateSize:function(f){if(!ah&&bH.modal){var e=bL.getScrollY();cE!==e&&(bC.style.top=e+"px",cE=e);if(!f&&cA.x===window.innerWidth&&cA.y===window.innerHeight){return}cA.x=window.innerWidth;cA.y=window.innerHeight;bC.style.height=cA.y+"px"}bs.x=bN.scrollWrap.clientWidth;bs.y=bN.scrollWrap.clientHeight;be();cn.x=bs.x+Math.round(bs.x*bH.spacing);cn.y=bs.y;bB(cn.x*b9);bE("beforeResize");if(void 0!==cd){for(var h,g=0;3>g;g++){f=by[g],br((g+cd)*cn.x,f.el.style),h=bF+g-1,bH.loop&&2<cm()&&(h=cy(h)),(e=bm(h))&&(aS||e.needsUpdate||!e.bounds)?(bN.cleanSlide(e),bN.setContent(f,h),1===g&&(bN.currItem=e,bN.updateCurrZoomItem(!0)),e.needsUpdate=!1):-1===f.index&&0<=h&&bN.setContent(f,h),e&&e.container&&(av(e,bs),ci(e),aN(e))}aS=!1}bT=bA=bN.currItem.initialZoomLevel;if(bG=bN.currItem.bounds){bK.x=bG.center.x,bK.y=bG.center.y,bv(!0)}bE("resize")},zoomTo:function(v,u,t,s,q){u&&(bT=bA,aE.x=Math.abs(u.x)-bK.x,aE.y=Math.abs(u.y)-bK.y,bq(b,bK));u=cv(v,!1);var p={};bn("x",u,p,v);bn("y",u,p,v);var g=bA,n=bK.x,f=bK.y;cF(p);u=function(e){1===e?(bA=v,bK.x=p.x,bK.y=p.y):(bA=(v-g)*e+g,bK.x=(p.x-n)*e+n,bK.y=(p.y-f)*e+f);q&&q(e);bv(1===e)};t?cu("customZoomTo",0,1,t,s||bL.easing.sine.inOut,u):u(1)}},aR,bj,bw={},b7={},bu={},co={},a5={},bX=[],a1={},bP,aQ=[],bg,a4,aT,al,bo,a7=0,bf=bY(),aK=0,b1,aB,bM,bh,aW,aH,ck,bZ,aI,bG,b3=bY(),b4,cp,aE=bY(),ay=bY(),bW,ar,cr,b2,cC,az=function(f,e){bg=Math.abs(f.x-e.x);a4=Math.abs(f.y-e.y);return Math.sqrt(bg*bg+a4*a4)},bp=function(){aW&&(ax(aW),aW=null)},ap=function(){if(b1&&(aW=d(ap),ck)){var f=ck.length;if(0!==f){if(bq(bw,ck[0]),bu.x=bw.x-co.x,bu.y=bw.y-co.y,bZ&&1<f){if(co.x=bw.x,co.y=bw.y,bu.x||bu.y||ck[1].x!==b7.x||ck[1].y!==b7.y){bq(b7,ck[1]);bM||(bM=!0,bE("zoomGestureStarted"));f=az(bw,b7);f=1/aI*f*bT;f>bN.currItem.initialZoomLevel+bN.currItem.initialZoomLevel/15&&(cC=!0);var e=1,h=cs(),g=bO();f<h?bH.pinchToClose&&!cC&&bT<=bN.currItem.initialZoomLevel?(e=1-(h-f)/(h/1.2),b5(e),bE("onPinchClose",e),cr=!0):(e=(h-f)/h,1<e&&(e=1),f=h-e*(h/3)):f>g&&(e=(f-g)/(6*h),1<e&&(e=1),f=g+e*h);bf.x=0.5*(bw.x+b7.x);bf.y=0.5*(bw.y+b7.y);ce.x+=bf.x-ay.x;ce.y+=bf.y-ay.y;bq(ay,bf);bK.x=ae("x",f);bK.y=ae("y",f);aT=f>bA;bA=f;bv()}}else{bW&&(ar&&(ar=!1,10<=Math.abs(bu.x)&&(bu.x-=ck[0].x-a5.x),10<=Math.abs(bu.y)&&(bu.y-=ck[0].y-a5.y)),co.x=bw.x,co.y=bw.y,0!==bu.x||0!==bu.y)&&("v"===bW&&bH.closeOnVerticalDrag&&"fit"===bH.scaleMode&&bA===bN.currItem.initialZoomLevel?(ce.y+=bu.y,bK.y+=bu.y,f=ag(),al=!0,bE("onVerticalDrag",f),b5(f),bv()):(f=b8(),e=bw.x,h=bw.y,50<f-bj&&(g=2<aQ.length?aQ.shift():{},g.x=e,g.y=h,aQ.push(g),bj=f),bh=!0,bG=bN.currItem.bounds,c("x",bu)||(c("y",bu),cF(bK),bv())))}}}},cK=function(f,e){return !f||f.className&&-1<f.className.indexOf("pswp__scroll-wrap")?!1:e(f)?f:cK(f.parentNode,e)},ai={},cx=function(f,e){ai.prevent=!cK(f.target,bH.isClickableElement);bE("preventDragEvent",f,e,ai);return ai.prevent},b0=function(f,e){e.x=f.pageX;e.y=f.pageY;e.id=f.identifier;return e},ag=function(){return 1-Math.abs((bK.y-bN.currItem.initialPosition.y)/(bs.y/2))},a3={},aZ={},bV=[],ch,i=function(e){for(;0<bV.length;){bV.pop()}bS?(ch=0,bX.forEach(function(f){0===ch?bV[0]=f:1===ch&&(bV[1]=f);ch++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(bV[0]=b0(e.touches[0],a3),1<e.touches.length&&(bV[1]=b0(e.touches[1],aZ))):(a3.x=e.pageX,a3.y=e.pageY,a3.id="",bV[0]=a3);return bV},c=function(w,v){var u,t=bK[w]+v[w],s,e=0<v[w],q=b3.x+v.x,k=b3.x-a1.x,g,h;u=t>bG.min[w]||t<bG.max[w]?bH.panEndFriction:1;t=bK[w]+v[w]*u;if(bH.allowPanToNext||bA===bN.currItem.initialZoomLevel){if(b4?"h"!==bW||("x"!==w||bM)||(e?(t>bG.min[w]&&(u=bH.panEndFriction,s=bG.min[w]-b[w]),(0>=s||0>k)&&1<cm()?(h=q,0>k&&q>a1.x&&(h=a1.x)):bG.min.x!==bG.max.x&&(g=t)):(t<bG.max[w]&&(u=bH.panEndFriction,s=b[w]-bG.max[w]),(0>=s||0<k)&&1<cm()?(h=q,0<k&&q<a1.x&&(h=a1.x)):bG.min.x!==bG.max.x&&(g=t))):h=q,"x"===w){return void 0!==h&&(bB(h,!0),aH=h===a1.x?!1:!0),bG.min.x!==bG.max.x&&(void 0!==g?bK.x=g:aH||(bK.x+=v.x*u)),void 0!==h}}cp||aH||bA>bN.currItem.fitRatio&&(bK[w]+=v[w]*u)},aO=function(f){if(!("mousedown"===f.type&&0<f.button)){if(aU){f.preventDefault()}else{if(!bo||"mousedown"!==f.type){cx(f,!0)&&f.preventDefault();bE("pointerDown");if(bS){var e=bL.arraySearch(bX,f.pointerId,"id");0>e&&(e=bX.length);bX[e]={x:f.pageX,y:f.pageY,id:f.pointerId}}f=i(f);e=f.length;ck=null;cG();b1&&1!==e||(b1=ar=!0,bL.bind(window,cJ,bN),aT=cC=cr=al=aH=bh=aB=bM=!1,bW=null,bE("firstTouchStart",f),bq(b,bK),ce.x=ce.y=0,bq(co,f[0]),bq(a5,co),a1.x=cn.x*b9,aQ=[{x:co.x,y:co.y}],bj=aR=b8(),cv(bA,!0),bp(),ap());!bZ&&(1<e&&!cp&&!aH)&&(bT=bA,bM=!1,bZ=aB=!0,ce.y=ce.x=0,bq(b,bK),bq(bw,f[0]),bq(b7,f[1]),ay.x=0.5*(bw.x+b7.x),ay.y=0.5*(bw.y+b7.y),aE.x=Math.abs(ay.x)-bK.x,aE.y=Math.abs(ay.y)-bK.y,aI=az(bw,b7))}}}},aF=function(f){f.preventDefault();if(bS){var e=bL.arraySearch(bX,f.pointerId,"id");-1<e&&(e=bX[e],e.x=f.pageX,e.y=f.pageY)}b1&&(f=i(f),bW||bh||bZ?ck=f:b3.x!==cn.x*b9?bW="h":(e=Math.abs(f[0].x-co.x)-Math.abs(f[0].y-co.y),10<=Math.abs(e)&&(bW=0<e?"h":"v",ck=f)))},cH=function(g){if(bD.isOldAndroid){if(bo&&"mouseup"===g.type){return}-1<g.type.indexOf("touch")&&(clearTimeout(bo),bo=setTimeout(function(){bo=0},600))}bE("pointerUp");cx(g,!1)&&g.preventDefault();var e;if(bS){var m=bL.arraySearch(bX,g.pointerId,"id");-1<m&&(e=bX.splice(m,1)[0],navigator.pointerEnabled?e.type=g.pointerType||"mouse":(e.type={4:"mouse",2:"touch",3:"pen"}[g.pointerType],e.type||(e.type=g.pointerType||"mouse")))}var k=i(g),m=k.length;"mouseup"===g.type&&(m=0);if(2===m){return ck=null,!0}1===m&&bq(a5,k[0]);0!==m||(bW||cp)||(e||("mouseup"===g.type?e={x:g.pageX,y:g.pageY,type:"mouse"}:g.changedTouches&&g.changedTouches[0]&&(e={x:g.changedTouches[0].pageX,y:g.changedTouches[0].pageY,type:"touch"})),bE("touchRelease",g,e));g=-1;0===m&&(b1=!1,bL.unbind(window,cJ,bN),bp(),bZ?g=0:-1!==aK&&(g=b8()-aK));aK=1===m?b8():-1;g=-1!==g&&150>g?"zoom":"swipe";bZ&&2>m&&(bZ=!1,1===m&&(g="zoomPointerUp"),bE("zoomGestureEnded"));ck=null;if(bh||bM||cp||al){if(cG(),bP||(bP=aw()),bP.calculateSwipeSpeed("x"),al){if(ag()<bH.verticalDragRange){bN.close()}else{var f=bK.y,h=b2;cu("verticalDrag",0,1,300,bL.easing.cubic.out,function(l){bK.y=(bN.currItem.initialPosition.y-f)*l+f;b5((1-h)*l+h);bv()});bE("onVerticalDrag",1)}}else{if((aH||cp)&&0===m){if(am(g,bP)){return}g="zoomPointerUp"}cp||("swipe"!==g?ad():!aH&&bA>bN.currItem.fitRatio&&cQ(bP))}}},aw=function(){var f,e,g={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(h){1<aQ.length?(f=b8()-bj+50,e=aQ[aQ.length-2][h]):(f=b8()-aR,e=a5[h]);g.lastFlickOffset[h]=co[h]-e;g.lastFlickDist[h]=Math.abs(g.lastFlickOffset[h]);g.lastFlickSpeed[h]=20<g.lastFlickDist[h]?g.lastFlickOffset[h]/f:0;0.1>Math.abs(g.lastFlickSpeed[h])&&(g.lastFlickSpeed[h]=0);g.slowDownRatio[h]=0.95;g.slowDownRatioReverse[h]=1-g.slowDownRatio[h];g.speedDecelerationRatio[h]=1},calculateOverBoundsAnimOffset:function(k,h){g.backAnimStarted[k]||(bK[k]>bG.min[k]?g.backAnimDestination[k]=bG.min[k]:bK[k]<bG.max[k]&&(g.backAnimDestination[k]=bG.max[k]),void 0!==g.backAnimDestination[k]&&(g.slowDownRatio[k]=0.7,g.slowDownRatioReverse[k]=1-g.slowDownRatio[k],0.05>g.speedDecelerationRatioAbs[k]&&(g.lastFlickSpeed[k]=0,g.backAnimStarted[k]=!0,cu("bounceZoomPan"+k,bK[k],g.backAnimDestination[k],h||300,bL.easing.sine.out,function(l){bK[k]=l;bv()}))))},calculateAnimOffset:function(h){g.backAnimStarted[h]||(g.speedDecelerationRatio[h]*=g.slowDownRatio[h]+g.slowDownRatioReverse[h]-g.slowDownRatioReverse[h]*g.timeDiff/10,g.speedDecelerationRatioAbs[h]=Math.abs(g.lastFlickSpeed[h]*g.speedDecelerationRatio[h]),g.distanceOffset[h]=g.lastFlickSpeed[h]*g.speedDecelerationRatio[h]*g.timeDiff,bK[h]+=g.distanceOffset[h])},panAnimLoop:function(){cl.zoomPan&&(cl.zoomPan.raf=d(g.panAnimLoop),g.now=b8(),g.timeDiff=g.now-g.lastNow,g.lastNow=g.now,g.calculateAnimOffset("x"),g.calculateAnimOffset("y"),bv(),g.calculateOverBoundsAnimOffset("x"),g.calculateOverBoundsAnimOffset("y"),0.05>g.speedDecelerationRatioAbs.x&&0.05>g.speedDecelerationRatioAbs.y&&(bK.x=Math.round(bK.x),bK.y=Math.round(bK.y),bv(),cP("zoomPan")))}};return g},cQ=function(e){e.calculateSwipeSpeed("y");bG=bN.currItem.bounds;e.backAnimDestination={};e.backAnimStarted={};if(0.05>=Math.abs(e.lastFlickSpeed.x)&&0.05>=Math.abs(e.lastFlickSpeed.y)){return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0}bQ("zoomPan");e.lastNow=b8();e.panAnimLoop()},am=function(f,e){var p;cp||(a7=bF);var n;if("swipe"===f){var m=co.x-a5.x,l=10>e.lastFlickDist.x;30<m&&(l||20<e.lastFlickOffset.x)?n=-1:-30>m&&(l||-20>e.lastFlickOffset.x)&&(n=1)}var h;n&&(bF+=n,0>bF?(bF=bH.loop?cm()-1:0,h=!0):bF>=cm()&&(bF=bH.loop?0:cm()-1,h=!0),!h||bH.loop)&&(cj+=n,b9-=n,p=!0);n=cn.x*b9;m=Math.abs(n-b3.x);p||n>b3.x===0<e.lastFlickSpeed.x?(m=0<Math.abs(e.lastFlickSpeed.x)?m/Math.abs(e.lastFlickSpeed.x):333,m=Math.min(m,400),m=Math.max(m,250)):m=333;a7===bF&&(p=!1);cp=!0;bE("mainScrollAnimStart");cu("mainScroll",b3.x,n,m,bL.easing.cubic.out,bB,function(){cG();cp=!1;a7=-1;(p||a7!==bF)&&bN.updateCurrItem();bE("mainScrollAnimComplete")});p&&bN.updateCurrItem(!0);return p},ad=function(){var f=bA,e=cs(),l=bO();bA<e?f=e:bA>l&&(f=l);var k,h=b2;if(cr&&!aT&&!cC&&bA<e){return bN.close(),!0}cr&&(k=function(g){b5((1-h)*g+h)});bN.zoomTo(f,0,200,bL.easing.cubic.out,k);return !0};cL("Gestures",{publicMethods:{initGestures:function(){var e=function(g,m,l,k,h){aJ=g+m;aA=g+l;cN=g+k;aq=h?g+h:""};(bS=bD.pointerEvent)&&bD.touch&&(bD.touch=!1);bS?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):bD.touch?(e("touch","start","move","end","cancel"),b6=!0):e("mouse","down","move","up");cJ=aA+" "+cN+" "+aq;j=aJ;bS&&!b6&&(b6=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints);bN.likelyTouchDevice=b6;bt[aJ]=aO;bt[aA]=aF;bt[cN]=cH;aq&&(bt[aq]=bt[cN]);bD.touch&&(j+=" mousedown",cJ+=" mousemove mouseup",bt.mousedown=bt[aJ],bt.mousemove=bt[aA],bt.mouseup=bt[cN]);b6||(bH.allowPanToNext=!1)}}});var bd,a2=function(f,e,p,l){bd&&clearTimeout(bd);cM=aU=!0;var g;f.initialLayout?(g=f.initialLayout,f.initialLayout=null):g=bH.getThumbBoundsFn&&bH.getThumbBoundsFn(bF);var h=p?bH.hideAnimationDuration:bH.showAnimationDuration,m=function(){cP("initialZoom");p?(bN.template.removeAttribute("style"),bN.bg.removeAttribute("style")):(b5(1),e&&(e.style.display="block"),bL.addClass(bC,"pswp--animated-in"),bE("initialZoom"+(p?"OutEnd":"InEnd")));l&&l();aU=!1};h&&g&&void 0!==g.x?function(){var k=aM,n=!bN.currItem.src||bN.currItem.loadError||bH.showHideOpacity;f.miniImg&&(f.miniImg.style.webkitBackfaceVisibility="hidden");p||(bA=g.w/f.w,bK.x=g.x,bK.y=g.y-o,bN[n?"template":"bg"].style.opacity=0.001,bv());bQ("initialZoom");p&&!k&&bL.removeClass(bC,"pswp--animated-in");if(n){if(p){bL[(k?"remove":"add")+"Class"](bC,"pswp--animate_opacity")}else{setTimeout(function(){bL.addClass(bC,"pswp--animate_opacity")},30)}}bd=setTimeout(function(){bE("initialZoom"+(p?"Out":"In"));if(p){var z=g.w/f.w,y=bK.x,q=bK.y,x=bA,w=b2,v=function(s){1===s?(bA=z,bK.x=g.x,bK.y=g.y-cE):(bA=(z-x)*s+x,bK.x=(g.x-y)*s+y,bK.y=(g.y-cE-q)*s+q);bv();n?bC.style.opacity=1-s:b5(w-s*w)};k?cu("initialZoom",0,1,h,bL.easing.cubic.out,v,m):(v(1),bd=setTimeout(m,h+20))}else{bA=f.initialZoomLevel,bq(bK,f.initialPosition),bv(),b5(1),n?bC.style.opacity=1:b5(1),bd=setTimeout(m,h+20)}},p?25:90)}():(bE("initialZoom"+(p?"Out":"In")),bA=f.initialZoomLevel,bq(bK,f.initialPosition),bv(),bC.style.opacity=p?0:1,b5(1),h?setTimeout(function(){m()},h):m())},aL,aC,at,ao=[],cM,aU,ct={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return aL.length}},bm,cm,bz=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},av=function(h,g,n){if(h.src&&!h.loadError){var m=!n;m&&(h.vGap||(h.vGap={top:0,bottom:0}),bE("parseVerticalMargin",h));aC=g.x;at=g.y-h.vGap.top-h.vGap.bottom;if(m){g=aC/h.w;var l=at/h.h;h.fitRatio=g<l?g:l;g=bH.scaleMode;"orig"===g?n=1:"fit"===g&&(n=h.fitRatio);1<n&&(n=1);h.initialZoomLevel=n;h.bounds||(h.bounds=bz())}if(n){g=h.w*n;var l=h.h*n,k=h.bounds;k.center.x=Math.round((aC-g)/2);k.center.y=Math.round((at-l)/2)+h.vGap.top;k.max.x=g>aC?Math.round(aC-g):k.center.x;k.max.y=l>at?Math.round(at-l)+h.vGap.top:k.center.y;k.min.x=g>aC?0:k.center.x;k.min.y=l>at?h.vGap.top:k.center.y;m&&n===h.initialZoomLevel&&(h.initialPosition=h.bounds.center);return h.bounds}}else{return h.w=h.h=0,h.initialZoomLevel=h.fitRatio=1,h.bounds=bz(),h.initialPosition=h.bounds.center,h.bounds}},bJ=function(h,e,n,m,l,k){!e.loadError&&m&&(e.imageAppended=!0,ci(e,m,e===bN.currItem&&cD),n.appendChild(m),k&&setTimeout(function(){e&&(e.loaded&&e.placeholder)&&(e.placeholder.style.display="none",e.placeholder=null)},500))},bi=function(f){f.loading=!0;f.loaded=!1;var e=f.img=bL.createEl("pswp__img","img"),g=function(){f.loading=!1;f.loaded=!0;f.loadComplete?f.loadComplete(f):f.img=null;e=e.onload=e.onerror=null};e.onload=g;e.onerror=function(){f.loadError=!0;g()};e.src=f.src;return e},a6=function(f,e){if(f.src&&f.loadError&&f.container){return e&&(f.container.innerHTML=""),f.container.innerHTML=bH.errorMsg.replace("%url%",f.src),!0}},ci=function(f,e,h){if(f.src){e||(e=f.container.lastChild);var g=h?f.w:Math.round(f.w*f.fitRatio);h=h?f.h:Math.round(f.h*f.fitRatio);f.placeholder&&!f.loaded&&(f.placeholder.style.width=g+"px",f.placeholder.style.height=h+"px");e.style.width=g+"px";e.style.height=h+"px"}},aV=function(){if(ao.length){for(var f,e=0;e<ao.length;e++){f=ao[e],f.holder.index===f.index&&bJ(f.index,f.item,f.baseDiv,f.img,!1,f.clearPlaceholder)}ao=[]}};cL("Controller",{publicMethods:{lazyLoadItem:function(f){f=cy(f);var e=bm(f);e&&(!e.loaded&&!e.loading||aS)&&(bE("gettingData",f,e),e.src&&bi(e))},initController:function(){bL.extend(bH,ct,!0);bN.items=aL=cq;bm=bN.getItemAt;cm=bH.getNumItemsFn;3>cm()&&(bH.loop=!1);bx("beforeChange",function(f){var e=bH.preload;f=null===f?!0:0<=f;var h=Math.min(e[0],cm()),e=Math.min(e[1],cm()),g;for(g=1;g<=(f?e:h);g++){bN.lazyLoadItem(bF+g)}for(g=1;g<=(f?h:e);g++){bN.lazyLoadItem(bF-g)}});bx("initialLayout",function(){bN.currItem.initialLayout=bH.getThumbBoundsFn&&bH.getThumbBoundsFn(bF)});bx("mainScrollAnimComplete",aV);bx("initialZoomInEnd",aV);bx("destroy",function(){for(var f,e=0;e<aL.length;e++){f=aL[e],f.container&&(f.container=null),f.placeholder&&(f.placeholder=null),f.img&&(f.img=null),f.preloader&&(f.preloader=null),f.loadError&&(f.loaded=f.loadError=!1)}ao=null})},getItemAt:function(e){return 0<=e?void 0!==aL[e]?aL[e]:!1:!1},allowProgressiveImg:function(){return bH.forceProgressiveLoading||!b6||bH.mouseUsed||1200<screen.width},setContent:function(f,e){bH.loop&&(e=cy(e));var n=bN.getItemAt(f.index);n&&(n.container=null);var n=bN.getItemAt(e),m;if(n){bE("gettingData",e,n);f.index=e;f.item=n;var l=n.container=bL.createEl("pswp__zoom-wrap");!n.src&&n.html&&(n.html.tagName?l.appendChild(n.html):l.innerHTML=n.html);a6(n);av(n,bs);if(!n.src||n.loadError||n.loaded){n.src&&!n.loadError&&(m=bL.createEl("pswp__img","img"),m.style.opacity=1,m.src=n.src,ci(n,m),bJ(e,n,l,m,!0))}else{n.loadComplete=function(g){if(aj){if(f&&f.index===e){if(a6(g,!0)){g.loadComplete=g.img=null;av(g,bs);aN(g);f.index===bF&&bN.updateCurrZoomItem();return}g.imageAppended?!aU&&g.placeholder&&(g.placeholder.style.display="none",g.placeholder=null):bD.transform&&(cp||aU)?ao.push({item:g,baseDiv:l,img:g.img,index:e,holder:f,clearPlaceholder:!0}):bJ(e,g,l,g.img,cp||aU,!0)}g.loadComplete=null;g.img=null;bE("imageLoadComplete",e,g)}};if(bL.features.transform){var h;h="pswp__img pswp__img--placeholder"+(n.msrc?"":" pswp__img--placeholder--blank");h=bL.createEl(h,n.msrc?"img":"");n.msrc&&(h.src=n.msrc);ci(n,h);l.appendChild(h);n.placeholder=h}n.loading||bi(n);bN.allowProgressiveImg()&&(!cM&&bD.transform?ao.push({item:n,baseDiv:l,img:n.img,index:e,holder:f}):bJ(e,n,l,n.img,!0,!0))}cM||e!==bF?aN(n):(b4=l.style,a2(n,m||n.img));f.el.innerHTML="";f.el.appendChild(l)}else{f.el.innerHTML=""}},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null);e.loaded=e.loading=e.img=e.imageAppended=!1}}});var bU,bl={},cz=function(f,e,h){var g=document.createEvent("CustomEvent");g.initCustomEvent("pswpTap",!0,!0,{origEvent:f,target:f.target,releasePoint:e,pointerType:h||"touch"});f.target.dispatchEvent(g)};cL("Tap",{publicMethods:{initTap:function(){bx("firstTouchStart",bN.onTapStart);bx("touchRelease",bN.onTapRelease);bx("destroy",function(){bl={};bU=null})},onTapStart:function(e){1<e.length&&(clearTimeout(bU),bU=null)},onTapRelease:function(f,e){if(e&&!bh&&!aB&&!r){if(bU&&(clearTimeout(bU),bU=null,25>Math.abs(e.x-bl.x)&&25>Math.abs(e.y-bl.y))){bE("doubleTap",e);return}"mouse"===e.type?cz(f,e,"mouse"):"BUTTON"===f.target.tagName.toUpperCase()||bL.hasClass(f.target,"pswp__single-tap")?cz(f,e):(bq(bl,e),bU=setTimeout(function(){cz(f,e);bU=null},300))}}}});var cg;cL("DesktopZoom",{publicMethods:{initDesktopZoom:function(){an||(b6?bx("mouseUsed",function(){bN.setupDesktopZoom()}):bN.setupDesktopZoom(!0))},setupDesktopZoom:function(f){cg={};bx("bindEvents",function(){bL.bind(bC,"wheel mousewheel DOMMouseScroll",bN.handleMouseWheel)});bx("unbindEvents",function(){cg&&bL.unbind(bC,"wheel mousewheel DOMMouseScroll",bN.handleMouseWheel)});bN.mouseZoomedIn=!1;var e,h=function(){bN.mouseZoomedIn&&(bL.removeClass(bC,"pswp--zoomed-in"),bN.mouseZoomedIn=!1);1>bA?bL.addClass(bC,"pswp--zoom-allowed"):bL.removeClass(bC,"pswp--zoom-allowed");g()},g=function(){e&&(bL.removeClass(bC,"pswp--dragging"),e=!1)};bx("resize",h);bx("afterChange",h);bx("pointerDown",function(){bN.mouseZoomedIn&&(e=!0,bL.addClass(bC,"pswp--dragging"))});bx("pointerUp",g);f||h()},handleMouseWheel:function(f){if(bA<=bN.currItem.fitRatio){return bH.modal&&(!bH.closeOnScroll||r||b1?f.preventDefault():bR&&2<Math.abs(f.deltaY)&&(aM=!0,bN.close())),!0}f.stopPropagation();cg.x=0;if("deltaX" in f){1===f.deltaMode?(cg.x=18*f.deltaX,cg.y=18*f.deltaY):(cg.x=f.deltaX,cg.y=f.deltaY)}else{if("wheelDelta" in f){f.wheelDeltaX&&(cg.x=-0.16*f.wheelDeltaX),cg.y=f.wheelDeltaY?-0.16*f.wheelDeltaY:-0.16*f.wheelDelta}else{if("detail" in f){cg.y=f.detail}else{return}}}cv(bA,!0);var e=bK.x-cg.x,g=bK.y-cg.y;(bH.modal||e<=bG.min.x&&e>=bG.max.x&&g<=bG.min.y&&g>=bG.max.y)&&f.preventDefault();bN.panTo(e,g)},toggleDesktopZoom:function(f){f=f||{x:bs.x/2+cw.x,y:bs.y/2+cw.y};var e=bH.getDoubleTapZoom(!0,bN.currItem),g=bA===e;bN.mouseZoomedIn=!g;bN.zoomTo(g?bN.currItem.initialZoomLevel:e,f,333);bL[(g?"remove":"add")+"Class"](bC,"pswp--zoomed-in")}}});bL.extend(bN,a8)}});(function(b,a){"function"===typeof define&&define.amd?define(a):"object"===typeof exports?module.exports=a():b.PhotoSwipeUI_Default=a()})(this,function(){return function(aI,aG){var aH=this,aq=!1,aA=!0,aC,aE,aw,ay,aj,ai,az,aB=!0,ah,ap,aD,ag,af,ae,ad,aF,Y={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4000,timeToIdleOutside:1000,loadingIndicatorDelay:1000,addCaptionHTMLFn:function(d,c){if(!d.title){return c.children[0].innerHTML="",!1}c.children[0].innerHTML=d.title;return !0},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return aI.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return aI.currItem.title||""},indexIndicatorSep:" / "},au,ac=function(f){if(au){return !0}f=f||window.event;aF.timeToIdle&&(aF.mouseUsed&&!ap)&&ao();for(var e,l=(f.target||f.srcElement).className,k,h=0;h<at.length;h++){e=at[h],e.onTap&&-1<l.indexOf("pswp__"+e.name)&&(e.onTap(),k=!0)}k&&(f.stopPropagation&&f.stopPropagation(),au=!0,setTimeout(function(){au=!1},aG.features.isOldAndroid?600:30))},ax=function(e,d,f){aG[(f?"add":"remove")+"Class"](e,"pswp__"+d)},ab=function(){var c=1===aF.getNumItemsFn();c!==ad&&(ax(aE,"ui--one-slide",c),ad=c)},aa=function(){ax(az,"share-modal--hidden",aB)},av=function(){(aB=!aB)?(aG.removeClass(az,"pswp__share-modal--fade-in"),setTimeout(function(){aB&&aa()},300)):(aa(),setTimeout(function(){aB||aG.addClass(az,"pswp__share-modal--fade-in")},30));aB||X();return !1},W=function(d){d=d||window.event;var c=d.target||d.srcElement;aI.shout("shareLinkClick",d,c);if(!c.href){return !1}if(c.hasAttribute("download")){return !0}window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100));aB||av();return !1},X=function(){for(var h="",f,n,l,m,k=0;k<aF.shareButtons.length;k++){f=aF.shareButtons[k],n=aF.getImageURLForShare(f),l=aF.getPageURLForShare(f),m=aF.getTextForShare(f),n=f.url.replace("{{url}}",encodeURIComponent(l)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(m)),h+='<a href="'+n+'" target="_blank" class="pswp__share--'+f.id+'"'+(f.download?"download":"")+">"+f.label+"</a>",aF.parseShareButtonOut&&(h=aF.parseShareButtonOut(f,h))}az.children[0].innerHTML=h;az.children[0].onclick=W},an=function(d){for(var c=0;c<aF.closeElClasses.length;c++){if(aG.hasClass(d,"pswp__"+aF.closeElClasses[c])){return !0}}},am,al,ak=0,ao=function(){clearTimeout(al);ak=0;ap&&aH.setIdle(!1)},Z=function(c){c=c?c:window.event;c=c.relatedTarget||c.toElement;c&&"HTML"!==c.nodeName||(clearTimeout(al),al=setTimeout(function(){aH.setIdle(!0)},aF.timeToIdleOutside))},o=function(){aF.preloaderEl&&(ar(!0),aD("beforeChange",function(){clearTimeout(ae);ae=setTimeout(function(){aI.currItem&&aI.currItem.loading?(!aI.allowProgressiveImg()||aI.currItem.img&&!aI.currItem.img.naturalWidth)&&ar(!1):ar(!0)},aF.loadingIndicatorDelay)}),aD("imageLoadComplete",function(d,c){aI.currItem===c&&ar(!0)}))},ar=function(c){af!==c&&(ax(ag,"preloader--active",!c),af=c)},j=function(e){var c=e.vGap;if(!aI.likelyTouchDevice||aF.mouseUsed||1200<screen.width){var f=aF.barsSize;aF.captionEl&&"auto"===f.bottom?(ay||(ay=aG.createEl("pswp__caption pswp__caption--fake"),ay.appendChild(aG.createEl("pswp__caption__center")),aE.insertBefore(ay,aw),aG.addClass(aE,"pswp__ui--fit")),aF.addCaptionHTMLFn(e,ay,!0)?c.bottom=parseInt(ay.clientHeight,10)||44:c.bottom=f.top):c.bottom="auto"===f.bottom?0:f.bottom;c.top=f.top}else{c.top=c.bottom=0}},i=function(){aF.timeToIdle&&aD("mouseUsed",function(){aG.bind(document,"mousemove",ao);aG.bind(document,"mouseout",Z);am=setInterval(function(){ak++;2===ak&&aH.setIdle(!0)},aF.timeToIdle/2)})},b=function(){aD("onVerticalDrag",function(d){aA&&0.95>d?aH.hideControls():!aA&&0.95<=d&&aH.showControls()});var c;aD("onPinchClose",function(d){aA&&0.9>d?(aH.hideControls(),c=!0):c&&(!aA&&0.9<d)&&aH.showControls()});aD("zoomGestureEnded",function(){c=!1})},at=[{name:"caption",option:"captionEl",onInit:function(c){aw=c}},{name:"share-modal",option:"shareEl",onInit:function(c){az=c},onTap:function(){av()}},{name:"button--share",option:"shareEl",onInit:function(c){ai=c},onTap:function(){av()}},{name:"button--zoom",option:"zoomEl",onTap:aI.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(c){aj=c}},{name:"button--close",option:"closeEl",onTap:aI.close},{name:"button--arrow--left",option:"arrowEl",onTap:aI.prev},{name:"button--arrow--right",option:"arrowEl",onTap:aI.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){aC.isFullscreen()?aC.exit():aC.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(c){ag=c}}],a=function(){var f,e,l,k=function(p){if(p){for(var n=p.length,m=0;m<n;m++){f=p[m];e=f.className;for(var c=0;c<at.length;c++){if(l=at[c],-1<e.indexOf("pswp__"+l.name)){if(aF[l.option]){if(aG.removeClass(f,"pswp__element--disabled"),l.onInit){l.onInit(f)}}else{aG.addClass(f,"pswp__element--disabled")}}}}}};k(aE.children);var g=aG.getChildByClass(aE,"pswp__top-bar");g&&k(g.children)};aH.init=function(){aG.extend(aI.options,Y,!0);aF=aI.options;aE=aG.getChildByClass(aI.scrollWrap,"pswp__ui");aD=aI.listen;b();aD("beforeChange",aH.update);aD("doubleTap",function(d){var c=aI.currItem.initialZoomLevel;aI.getZoomLevel()!==c?aI.zoomTo(c,d,333):aI.zoomTo(aF.getDoubleTapZoom(!1,aI.currItem),d,333)});aD("preventDragEvent",function(e,d,f){(d=e.target||e.srcElement)&&(d.className&&-1<e.type.indexOf("mouse")&&(0<d.className.indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(d.tagName)))&&(f.prevent=!1)});aD("bindEvents",function(){aG.bind(aE,"pswpTap click",ac);aG.bind(aI.scrollWrap,"pswpTap",aH.onGlobalTap);aI.likelyTouchDevice||aG.bind(aI.scrollWrap,"mouseover",aH.onMouseOver)});aD("unbindEvents",function(){aB||av();am&&clearInterval(am);aG.unbind(document,"mouseout",Z);aG.unbind(document,"mousemove",ao);aG.unbind(aE,"pswpTap click",ac);aG.unbind(aI.scrollWrap,"pswpTap",aH.onGlobalTap);aG.unbind(aI.scrollWrap,"mouseover",aH.onMouseOver);aC&&(aG.unbind(document,aC.eventK,aH.updateFullscreen),aC.isFullscreen()&&(aF.hideAnimationDuration=0,aC.exit()),aC=null)});aD("destroy",function(){aF.captionEl&&(ay&&aE.removeChild(ay),aG.removeClass(aw,"pswp__caption--empty"));az&&(az.children[0].onclick=null);aG.removeClass(aE,"pswp__ui--over-close");aG.addClass(aE,"pswp__ui--hidden");aH.setIdle(!1)});aF.showAnimationDuration||aG.removeClass(aE,"pswp__ui--hidden");aD("initialZoomIn",function(){aF.showAnimationDuration&&aG.removeClass(aE,"pswp__ui--hidden")});aD("initialZoomOut",function(){aG.addClass(aE,"pswp__ui--hidden")});aD("parseVerticalMargin",j);a();aF.shareEl&&(ai&&az)&&(aB=!0);ab();i();aF.fullscreenEl&&!aG.features.isOldAndroid&&(aC||(aC=aH.getFullscreenAPI()),aC?(aG.bind(document,aC.eventK,aH.updateFullscreen),aH.updateFullscreen(),aG.addClass(aI.template,"pswp--supports-fs")):aG.removeClass(aI.template,"pswp--supports-fs"));o()};aH.setIdle=function(c){ap=c;ax(aE,"ui--idle",c)};aH.update=function(){aA&&aI.currItem?(aH.updateIndexIndicator(),aF.captionEl&&(aF.addCaptionHTMLFn(aI.currItem,aw),ax(aw,"caption--empty",!aI.currItem.title)),aq=!0):aq=!1;aB||av();ab()};aH.updateFullscreen=function(c){c&&setTimeout(function(){aI.setScrollOffset(0,aG.getScrollY())},50);aG[(aC.isFullscreen()?"add":"remove")+"Class"](aI.template,"pswp--fs")};aH.updateIndexIndicator=function(){aF.counterEl&&(aj.innerHTML=aI.getCurrentIndex()+1+aF.indexIndicatorSep+aF.getNumItemsFn())};aH.onGlobalTap=function(d){d=d||window.event;var c=d.target||d.srcElement;au||(d.detail&&"mouse"===d.detail.pointerType?an(c)?aI.close():aG.hasClass(c,"pswp__img")&&(1===aI.getZoomLevel()&&aI.getZoomLevel()<=aI.currItem.fitRatio?aF.clickToCloseNonZoomable&&aI.close():aI.toggleDesktopZoom(d.detail.releasePoint)):(aF.tapToToggleControls&&(aA?aH.hideControls():aH.showControls()),aF.tapToClose&&(aG.hasClass(c,"pswp__img")||an(c))&&aI.close()))};aH.onMouseOver=function(c){c=c||window.event;ax(aE,"ui--over-close",an(c.target||c.srcElement))};aH.hideControls=function(){aG.addClass(aE,"pswp__ui--hidden");aA=!1};aH.showControls=function(){aA=!0;aq||aH.update();aG.removeClass(aE,"pswp__ui--hidden")};aH.supportsFullscreen=function(){var c=document;return !!(c.exitFullscreen||c.mozCancelFullScreen||c.webkitExitFullscreen||c.msExitFullscreen)};aH.getFullscreenAPI=function(){var d=document.documentElement,c;d.requestFullscreen?c={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:"fullscreenchange"}:d.mozRequestFullScreen?c={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"mozfullscreenchange"}:d.webkitRequestFullscreen?c={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkitfullscreenchange"}:d.msRequestFullscreen&&(c={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"});c&&(c.enter=function(){ah=aF.closeOnScroll;aF.closeOnScroll=!1;if("webkitRequestFullscreen"===this.enterK){aI.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)}else{return aI.template[this.enterK]()}},c.exit=function(){aF.closeOnScroll=ah;return document[this.exitK]()},c.isFullscreen=function(){return document[this.elementK]});return c}}});var QuickBuy={init:function(f,h,e,g){e=e||{};g=g||"";e=this.getHolder(f).data({parentProductId:h,attributes:e,dynamic_bundle_seo_title:g});e.find(".product__details__holder__quick-buy").remove();e.parents(".product-list").find(".product--hover--fixed").removeClass("product--hover--fixed");e.parent().addClass("product--hover--fixed").removeClass("product--hover").css("height","");e.append(Tache.parseMustache(Tache.get("js-quick-buy-overlay"),{parent_product_id:h,dynamic_bundle_seo_title:g}));e.parents(".slick-slide").length||$("#js-trans-overlay").show().addClass("trans-overlay--colour");this.getProductOptions(f);return this},close:function(b){b=this.getHolder(b);b.find(".product__details__holder__quick-buy").remove();b.parent().removeClass("product--hover product--hover--fixed");$("#js-trans-overlay").hide().removeClass("trans-overlay--colour");return this},getParentProductID:function(b){return this.getHolder(b).data("parentProductId")},getHolder:function(b){return $(b).parents(".product__details__holder")},getContainer:function(b){return this.getHolder(b).find(".product__details__holder__quick-buy__options")},getProductOptionsQueryString:function(e){var f,d=[];e=this.getHolder(e).data("attributes");for(f in e){e.hasOwnProperty(f)&&d.push("attributes["+f.replace("a","")+"]="+e[f])}return d.length?"?"+d.join("&"):""},getProductOptions:function(e){var f=this,d=f.getHolder(e);$.getJSON("/ajax/get_product_options/"+this.getParentProductID(e)+this.getProductOptionsQueryString(e),function(c){f.getContainer(e).html(Tache.parseMustache(Tache.get("js-quick-buy-options"),c));if("undefined"!==typeof c.total_attributes&&"undefined"!==typeof c.selected_attributes&&c.total_attributes==c.selected_attributes){var b,a;for(a in c.selection){if(c.selection.hasOwnProperty(a)){b=c.selection[a];d.data("productId",b.product_id);break}}if(0==c.total_attributes){return""!=d.data("dynamic_bundle_seo_title")?f.addToDynamicBundle(null,d):f.addToBasket(null,d)}"undefined"!==typeof b&&(c=d.find(".product__details__holder__quick-buy__buy-price"),c.removeClass("product__details__holder__quick-buy__buy-price--sale").html(b.price),"undefined"!=typeof b.price_was&&c.addClass("product__details__holder__quick-buy__buy-price--sale"));"undefined"!=typeof b.days_till_release&&0<b.days_till_release?d.find(".product__details__holder__quick-buy__preorder-button").show():d.find(".product__details__holder__quick-buy__buy-button").show()}});return this},makeAttributeSelection:function(g,j,f){var i=this.getHolder(g),h=i.data("attributes");h["a"+j]=parseInt(f);i.data("attributes",h);this.getProductOptions(g)},addToBasket:function(e,f){f=f||this.getHolder(e);var d=f.data("productId");$.getJSON("/ajax/addtobasket/?product_id="+d+"&quantity=1",function(b){if("undefined"!==typeof b.error){alert(b.message)}else{if(parent.ProductRelay.updateHeaderBasketInfo(b),"undefined"!==typeof b.products){var g,c;for(c in b.products){if(b.products.hasOwnProperty(c)&&b.products[c].product_id==d){g=b.products[c];break}}f.find(".product__details__holder__quick-buy").html(Tache.parseMustache(Tache.get("js-quick-buy-added"),{title:g.product_title,quantity:1,product_quantity:g.product_quantity}))}}})},addToDynamicBundle:function(f,h){h=h||this.getHolder(f);var e=h.data("parentProductId"),g=h.data("productId");$("#js-dynamic-bundle-product-id-"+e).val(g);$("#js-dynamic-bundle-select-form-"+e).submit();h.find(".product__details__holder__quick-buy").html(Tache.parseMustache(Tache.get("js-quick-buy-added"),{}))}};var autoComplete={dev:!1,$suggest:null,init:function(F,E){function o(){null!==C.$suggest&&(C.$suggest.abort(),C.$suggest=null)}function z(){C.dev||x.html("").hide();o();y="";A.removeClass("query--searching");l.css("overflow-y","hidden")}function j(){clearTimeout(w);"mobile"!=vs.deviceType()&&(w=setTimeout(z,600))}function i(){var a=A.val().trim(),c=(new Date).getTime();if(a.length<E&&(!$.isNumeric(a)||"false"==vsvar("setting.enable_product_catalogue_pages"))){return z(),!1}if(1000>c-b){return clearTimeout(v),v=setTimeout(i,100),!1}if(y===a){return !1}b=c;o();y=a;A.addClass("query--searching");C.$suggest=$.ajax({type:"GET",url:"/ajax/autocomplete/json?"+c+"&q="+a,dataType:"json",success:function(d){C.$suggest=null;B=-1;Tache.render("js-search-results",d);x.show();$("#js-search-results-close").click(z);A.removeClass("query--searching");l.css("overflow-y","visible")}});return !0}var C=this,v,B=-1,b=0,w,y="",A=$("#"+F).attr("autocomplete","off");if(!A.length){return !1}var x=$("#js-search-results"),l=$(".site-header__links-panel"),D=$(window).on("resize",j).on("orientationchange",z);$(".site-header__top__icon, .hblock").click(z);A.offset().left>D.width()/2&&x.addClass("search-results--outer--right");A.on("blur",j).keyup(function(a){switch(a.keyCode?a.keyCode:a.which){case 38:case 40:a.preventDefault();break;case 37:case 39:break;default:v=setTimeout(i,500)}});A.keydown(function(c){function m(d,e){var f=k.removeClass("ac-over").eq(d);clearTimeout(w);f.addClass("ac-over");f.offset().top+f.outerHeight()-e.offset().top>=e.height()?e.scrollTop(e.scrollTop()-e.offset().top+f.offset().top-e.height()+f.outerHeight()):f.offset().top<=e.offset().top&&e.scrollTop(e.scrollTop()-e.offset().top+f.offset().top)}var g=x.children(),k=g.children(),h=k.length-1;switch(c.keyCode?c.keyCode:c.which){case 13:k.hasClass("ac-over")&&(window.location=k.filter(".ac-over").find("a").attr("href"),c.preventDefault());break;case 38:c.preventDefault();if(!x.is(":visible")){return !1}0>--B&&(B=h);m(B,g);break;case 40:c.preventDefault();if(!g.is(":visible")){return !1}++B>h&&(B=0);m(B,g);break;default:clearTimeout(v),clearTimeout(w)}return !0});return !0}};